steps:

# Analyze Azure resources using PSRule for Azure

- task: ps-rule-assert@2
  displayName: Analyze Azure template files
  continueOnError: true
  inputs:
    modules: 'PSRule.Rules.Azure'
    inputPath: code-test/
    baseline: Azure.All
    outputFormat: Sarif
    outputPath: output/ps-rule-results.sarif 

- task: PowerShell@2
  displayName: 'Run PSRule'
  continueOnError: true
  pool:
          vmImage: 'windows-latest'
  inputs:
    targetType: 'inline'
    script: |
      Import-Module -name Az.Accounts
      Update-Module -Name Az
      write-host "hello world"
      Export-AzRuleData -Subscription 'Test'
      write-host "hello world"
      
      
    
