steps:

# Analyze Azure resources using PSRule for Azure

- task: ps-rule-assert@2
  displayName: Analyze Azure template files
  continueOnError: true
  inputs:
    modules: 'PSRule.Rules.Azure'
    inputPath: code-test/
    baseline: Azure.Pillar.OperationalExcellence
    outputFormat: Sarif
    outputPath: output/ps-rule-results.sarif 

- task: PowerShell@2
  displayName: 'Run PSRule'
  continueOnError: true
  inputs:
    targetType: 'inline'
    script: |
      Invoke-PSRule -inputPath "code-test/989d9a1a-b126-437c-a3b1-895a530d1ec0.json" -Module 'PSRule.Rules.Azure'
    
